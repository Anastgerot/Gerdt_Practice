## Описание

Данный проект представляет собой систему для детекции языка в мультиязычных текстах. Скрипт автоматически разбивает текст на предложения, определяет язык каждого из них, и сохраняет предложения в отдельные файлы по языкам. Поддерживаются несколько моделей классификации языка, включая fastText, langdetect, langid, Lingua и XLM-RoBERTa.

---

## Функциональность

1. Загрузка всех `.txt` файлов из указанной директории.
2. Разделение текста на предложения (используется `nltk`).
3. Объединение предложений, содержащих преимущественно цифры, с соседними.
4. Определение языка каждого предложения с использованием выбранной модели (`fastText`, `langdetect`, `langid`, `lingua`, `XLM-RoBERTa`).
5. Обработка коротких и сомнительных предложений:
   - Повторное определение по скользящему окну (по словам или символам).
   - Если язык не ясен — фиксируется, что модель сомневалась.
6. Сохранение результатов в отдельные файлы по языкам.
7. Оценка качества моделей по заранее размеченным данным (Accuracy, Macro-F1, скорость).
8. Генерация отчёта в Markdown-формате (`results.md`).

---

## Установка зависимостей

```bash
pip install -r requirements.txt
```

---

## Использование

```bash
python main.py [-i входная_папка] [-o выходная_папка] [-c порог_уверенности] [-e движок]
```

## Параметры:

- `-i`, `--input-dir` — директория с входными .txt файлами (по умолчанию: `Examples`)
- `-o`, `--output-dir` — директория для результатов (по умолчанию: `Results`)
- `-c`, `--min-confidence` — минимальный порог уверенности (по умолчанию: `0.9`)
- `-e`, `--engine` — модель детекции языка: `fasttext`, `langdetect`, `langid`, `lingua`, `xlmroberta`

## Пример запуска:

```bash
python main.py -i Examples -o Results -c 0.92 -e fasttext
```

---

## Входные данные

- Форматы файлов: `.txt` или `.xml` (кодировка UTF-8)
- Требования к содержимому:
  - Каждый файл должен содержать размеченные предложения в формате:
    ```
    <язык> <предложение>
    ```
    Пример:
    ```
    en Hello world.
    es Hola mundo.
    ```
  - Для XML-файлов предложения извлекаются из тега `<s>` с атрибутом `lang`:
    ```xml
    <s lang="en">Hello world.</s>
    <s lang="es">Hola mundo.</s>
    ```

### Примеры:

В папке `Examples` находятся:

- `Eng_Deu_Jpn_Rus.txt` — размеченный файл с предложениями на английском, немецком, японском и русском
- `Kaz.txt` — файл только на казахском языке

---

## Выходные данные

- Отдельные `.txt` файлы по языкам: `<имя_файла>_<код_языка>.txt`
- Отчёт `results.md` с таблицей сравнения моделей (если были размеченные входные файлы)

---

## Поддерживаемые модели

- `fastText (lid.176.ftz)`
- `langdetect`
- `langid`
- `lingua`
- `XLM-RoBERTa`

